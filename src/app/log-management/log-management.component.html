<h5>{{languageService.i18n['index.menu_logMgr']}}</h5>

<div class="table">

  <h5 style="text-align: center;">{{languageService.i18n['LogLists']}}</h5>

  <div class="tab">
    <mat-button-toggle-group name="type" [(ngModel)]="type" (change)="changeType($event)">
      <mat-button-toggle value="User_Logs">{{languageService.i18n['UserLogs']}}</mat-button-toggle>
      <mat-button-toggle value="NE_Logs">{{languageService.i18n['NELogs']}}</mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  <!-- User Logs -->
  <ul *ngIf="type === 'User_Logs'">
    <form [formGroup]="searchForm" style="padding-bottom: 10px;">
      <div class="filter">
        <span><label>{{languageService.i18n['Log.start']}}</label>
          <span>
            <p-calendar formControlName="from" [showTime]="true" inputId="time" dateFormat="yy-mm-dd"></p-calendar>
          </span>
        </span>
        <span><label>{{languageService.i18n['Log.end']}}</label>
          <span>
            <p-calendar formControlName="to" [showTime]="true" inputId="time" dateFormat="yy-mm-dd"></p-calendar>
          </span>
        </span>
        <span><label>{{languageService.i18n['UserLog.logtype']}}</label>
          <select formControlName="UserLogType">
            <option value="All">All</option>
            <option *ngFor="let userlogtype of UserLogTypes" [value]="userlogtype">{{commonService.textTransfer(userlogtype)}}</option>
          </select>
          <mat-error *ngIf="searchForm.controls['UserLogType'].invalid">Required</mat-error>
        </span>
        <span tooltip="{{languageService.i18n['search']}}" class="material-icons" (click)="search()">search</span>
        <!--<span tooltip="{{languageService.i18n['a_search']}}" class="material-symbols-outlined" (click)="openAdvancedModal()">settings</span> -->
      </div>
    </form>

    <table class>
      <thead>
        <tr>
          <th>{{languageService.i18n['UserLog.No']}}</th>
          <th>{{languageService.i18n['UserLog.userid']}}</th>
          <th>{{languageService.i18n['UserLog.logtype']}}</th>
          <th>{{languageService.i18n['UserLog.loglevel']}}</th>
          <th>{{languageService.i18n['UserLog.logmsg']}}</th>
          <th>{{languageService.i18n['UserLog.logtime']}}</th>
          <th>{{languageService.i18n['UserLog.view']}}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let opt of UserLogsList.UserLogsinfo | paginate: { itemsPerPage: pageSize, currentPage: p, totalItems: totalItems, id: 'userlogsList' }">
          <td>{{opt.userlogID}}</td>
          <td>{{opt.userid}}</td>
          <td>{{opt.logtype}}</td>
          <td style="text-align: center;">{{opt.loglevel}}</td>
          <td>{{opt.logmsg}}</td>
          <td>{{opt.logtime}}</td>
          <td><mat-icon tooltip="{{languageService.i18n['view_detail']}}" (click)="openUserlogDetail(opt)">remove_red_eye</mat-icon></td>
        </tr>
        <!--
        <tr class="notFind" *ngIf="faultMessage.totalMessageNumber === 0">
          <td colspan="7">{{languageService.i18n['no_results']}}</td>
        </tr> -->
      </tbody>
      </table>
      <!-- pagination @11/01 Add by yuchen --> 
      <span class="total">{{languageService.i18n['UserLog.total1']}} {{UserLogsList.logNumber}} {{languageService.i18n['UserLog.total2']}}</span>
      <pagination-controls (pageChange)="pageChanged($event)" screenReaderPaginationLabel="Pagination" previousLabel="" 
      nextLabel="" id="userlogsList"> 
      </pagination-controls>
  </ul>

  <!-- NE Logs -->
  <ul *ngIf="type === 'NE_Logs'">
    <form [formGroup]="searchForm" style="padding-bottom: 10px;">
      <div class="filter">
        <span><label>{{languageService.i18n['Log.start']}}</label>
          <span>
            <p-calendar formControlName="from" [showTime]="true" inputId="time" dateFormat="yy-mm-dd"></p-calendar>
          </span>
        </span>
        <span><label>{{languageService.i18n['Log.end']}}</label>
          <span>
            <p-calendar formControlName="to" [showTime]="true" inputId="time" dateFormat="yy-mm-dd"></p-calendar>
          </span>
        </span>
        <span><label>{{languageService.i18n['NElog.operation']}}</label>
          <select formControlName="NELogType">
            <option value="All">All</option>
            <option *ngFor="let nelogtype of NELogTypes" [value]="nelogtype">{{commonService.textTransfer(nelogtype)}}</option>
          </select>
          <mat-error *ngIf="searchForm.controls['NELogType'].invalid">Required</mat-error>
        </span>

        <!-- Keyword Filter @11/03 add by yuchen -->
        <span style="margin-left: 10px;">
          <label style="margin-right: 5px !important">{{languageService.i18n['NElog.logKeywordString']}}</label>
          <input style="width: 400px" formControlName="keyword">
        </span>

        <span tooltip="{{languageService.i18n['search']}}" class="material-icons" (click)="search()">search</span>
        <!--<span tooltip="{{languageService.i18n['a_search']}}" class="material-symbols-outlined" (click)="openAdvancedModal()">settings</span> -->
      </div>
    </form>

    <table>
      <thead>
        <tr>
          <th>{{languageService.i18n['NElog.No']}}</th>
          <th>{{languageService.i18n['NElog.userid']}}</th>
          <th>{{languageService.i18n['NElog.operation']}}</th>
          <th>{{languageService.i18n['NElog.req_data']}}</th>
          <th>{{languageService.i18n['NElog.resp_data']}}</th>
          <th>{{languageService.i18n['NElog.logtime']}}</th>
          <th>{{languageService.i18n['NElog.view']}}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let opt of NELogsList.NELogsinfo | paginate: { itemsPerPage: pageSize, currentPage: p, totalItems: totalItems, id: 'nelogsList' }">
          <td>{{opt.NElogID}}</td>
          <td>{{opt.userid}}</td>
          <td>{{opt.operation}}</td>
          <td>
            {{opt.req_data}}
          </td>
          <td>
            {{opt.resp_data}}
          </td>          
          <td>{{opt.logtime}}</td>
          <td><mat-icon tooltip="{{languageService.i18n['view_detail']}}" (click)="openNElogDetail(opt)">remove_red_eye</mat-icon></td>
        </tr>
        <tr class="notFind" *ngIf="NELogsList.logNumber === 0">
          <td colspan="7">{{languageService.i18n['no_results']}}</td>
        </tr> 
      </tbody>
    </table>
    
    <!-- pagination @10/31 changed by yuchen --> 
    <span class="total">{{languageService.i18n['NElog.total1']}} {{NELogsList.logNumber}} {{languageService.i18n['NElog.total2']}}</span>
    <pagination-controls (pageChange)="pageChanged($event)" screenReaderPaginationLabel="Pagination2" previousLabel="" 
    nextLabel="" id="nelogsList"> 
    </pagination-controls>
  </ul>
  
</div>